---
import { increment_counter } from "./Page.state";

interface Props {
    id?: string
    hideCounter?: true;
}

const { id, hideCounter } = Astro.props;

const counter = increment_counter();
---

<section {id} class="page relative">
    <div class="subpage prose text-justify">
        <slot />

        {
            hideCounter !== true ? (
                <div class="absolute bottom-0 inset-x-0 flex justify-center">
                    <p>{counter}</p>
                </div>
            ) : null
        }
    </div>
</section>

<style>
    /* See https://stackoverflow.com/a/16650459 */
    .page {
        width: 210mm;
        min-height: 297mm;
        padding: 20mm;
        margin: 10mm auto;
        border: 1px #d3d3d3 solid;
        border-radius: 5px;
        background: white;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    .subpage {
        /* padding: 1cm; */
        /* border: 5px red solid; */
        height: 257mm;
        /* outline: 2cm #FFEAEA solid; */
    }

    @media print {
        .page {
            margin: 0;
            border: initial;
            border-radius: initial;
            width: initial;
            min-height: initial;
            box-shadow: initial;
            background: initial;
            page-break-after: always;
        }
    }
</style>
